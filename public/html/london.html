<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>London Tourism</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../css/tourism.css">
</head>
<body>
  <nav class="navbar">
    <div class="nav-left">
      <h2>üåç Travel Planner</h2>
    </div>
    <div class="nav-right">
      <span id="username-display">Traveler</span>
      <a href="/dashboard">Dashboard</a>
      <a href="/saved-trip">Saved Trips</a>
      <a href="/recent-trip">Recent Trips</a>
      <a href="/logout" class="logout-btn">Logout</a>
    </div>
  </nav>

  <header class="hero" style="background-image: url('../images/london-hero.jpg');">
    <div class="hero-text">
      <h1>London</h1>
      <p>The heart of the United Kingdom</p>
    </div>
  </header>

  <section class="city-info">
    <h2>About London</h2>
    <p>London is a global city known for its rich history, culture, and iconic landmarks. Explore world-famous museums, historic architecture, bustling markets, and scenic riverside walks.</p>
  </section>

  <section class="attractions">
    <h2>Top Attractions</h2>
    <div class="attraction-cards">
      <div class="attraction-card">
        <img src="../images/buckingham-palace.jpg" alt="Buckingham Palace">
        <h3>Buckingham Palace</h3>
        <p>The official residence of the British monarch, famous for its Changing of the Guard ceremony.</p>
      </div>
      <div class="attraction-card">
        <img src="../images/big-ben.jpg" alt="Big Ben">
        <h3>Big Ben</h3>
        <p>Iconic clock tower and a symbol of London‚Äôs historic architecture.</p>
      </div>
      <div class="attraction-card">
        <img src="../images/london-eye.jpg" alt="London Eye">
        <h3>London Eye</h3>
        <p>Giant observation wheel offering panoramic views of the River Thames and city skyline.</p>
      </div>
      <div class="attraction-card">
        <img src="../images/tower-bridge.jpg" alt="Tower Bridge">
        <h3>Tower Bridge</h3>
        <p>Historic bascule bridge with a glass walkway and stunning city views.</p>
      </div>
    </div>
  </section>

  <section class="map-gallery">
    <h2>Explore on Map</h2>
    <div id="map"></div>
  </section>

  <script>
    function initMap() {
      const london = { lat: 51.5074, lng: -0.1278 };
      const map = new google.maps.Map(document.getElementById("map"), {
        zoom: 12,
        center: london,
      });

      const attractions = [
        { name: "Buckingham Palace", position: { lat: 51.5014, lng: -0.1419 } },
        { name: "Big Ben", position: { lat: 51.5007, lng: -0.1246 } },
        { name: "London Eye", position: { lat: 51.5033, lng: -0.1196 } },
        { name: "Tower Bridge", position: { lat: 51.5055, lng: -0.0754 } }
      ];

      attractions.forEach(loc => {
        const marker = new google.maps.Marker({
          position: loc.position,
          map: map,
          title: loc.name
        });

        const infoWindow = new google.maps.InfoWindow({
          content: `<strong>${loc.name}</strong>`
        });

        marker.addListener("click", () => infoWindow.open(map, marker));
      });
    }

    // Load username
    document.addEventListener("DOMContentLoaded", async () => {
      try {
        const userRes = await fetch("/api/user-info");
        if (!userRes.ok) throw new Error("User not logged in");
        const user = await userRes.json();
        document.getElementById("username-display").textContent = user.username;
      } catch (err) {
        console.error(err);
      }
    });
  </script>
  <script
    async
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyALFU6QDEMfp6vtL3WE9wdgrtg6tM4M7Ts&libraries=places&callback=initMap"
  ></script>
</body>
</html>